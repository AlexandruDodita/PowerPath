<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness App</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container">
  <div class="auth-screen" id="auth-screen">
    <h1>Fitness App</h1>
    <form id="auth-form" onsubmit="return handleAuth(event)">
      <input type="text" id="username" placeholder="Username" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit">Login</button>
      <p>or</p>
      <button type="button" onclick="showRegister()">Register</button>
    </form>
  </div>

  <div class="main-screen" id="main-screen" style="display:none;">
    <h1>Dashboard</h1>
    <button onclick="startWorkout()">New Workout</button>
    <button onclick="viewHistory()">History</button>
  </div>

  <div class="workout-screen" id="workout-screen" style="display:none;">
    <h1>New Workout</h1>
    <div id="exercise-list"></div>
    <button onclick="addExercise()">Add Exercise</button>
    <button onclick="finishWorkout()">Finish Workout</button>
  </div>
</div>

<script>
  const users = [{username: 'test', password: '1234'}]; // Mock user data

  function handleAuth(event) {
    event.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    const user = users.find(u => u.username === username && u.password === password);

    if (user) {
      alert('Login successful!');
      document.getElementById('auth-screen').style.display = 'none';
      document.getElementById('main-screen').style.display = 'block';
    } else {
      alert('Invalid username or password');
    }
  }

  function showRegister() {
    document.getElementById('auth-form').innerHTML = `
                <input type="text" id="reg-username" placeholder="Username" required>
                <input type="email" id="reg-email" placeholder="Email" required>
                <input type="password" id="reg-password" placeholder="Password" required>
                <button type="submit" onclick="registerUser(event)">Register</button>`;
  }

  function registerUser(event) {
    event.preventDefault();
    const regUsername = document.getElementById('reg-username').value;
    const regPassword = document.getElementById('reg-password').value;

    const existingUser = users.find(u => u.username === regUsername);

    if (existingUser) {
      alert('Username already exists!');
    } else {
      users.push({ username: regUsername, password: regPassword });
      alert('Registration successful! Please login.');
      location.reload();
    }
  }

  function startWorkout() {
    document.getElementById('main-screen').style.display = 'none';
    document.getElementById('workout-screen').style.display = 'block';
  }

  function viewHistory() {
    alert('Viewing Workout History...');
  }

  function addExercise() {
    const list = document.getElementById('exercise-list');
    const div = document.createElement('div');
    div.classList.add('exercise-item');
    div.innerHTML = `
                <select>
                    <option>Squat</option>
                    <option>Bench Press</option>
                    <option>Deadlift</option>
                    <option>Pull-up</option>
                    <option>Overhead Press</option>
                </select>
                <input type="number" placeholder="Sets" required>
                <input type="number" placeholder="Reps" required>
                <input type="number" placeholder="RPE / RIR" required>
            `;
    list.appendChild(div);
  }

  function finishWorkout() {
    alert('Workout Completed!');
    document.getElementById('workout-screen').style.display = 'none';
    document.getElementById('main-screen').style.display = 'block';
  }
</script>
</body>
</html>
